<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Blockly Demo: Custom RoBlockWar Blocks</title>
  <script src="./js/blockly_compressed.js"></script>
  <script src="./js/blocks_compressed.js"></script>
  <script src="./js/en.js"></script>
  <script src="./js/javascript_compressed.js"></script>
  <script src="./js/roblockwar.blocks.js"></script>
  
  
  <style>
     html, body {
        background-color: #000;
        margin: 0;
        padding: 0;
        overflow: hidden;
        height: 100%;
      }
      .blocklySvg {
        height: 100%;
        width: 100%;
        background-color: #000;
      }
  </style>
  
  <script>
    function init() {
        Blockly.inject(document.body, {toolbox: document.getElementById('toolbox'), collapse: false, disable: false});
        
        window.parent.blocklyLoaded(Blockly);
        if(Blockly.Index == 0){
        var xml_text = document.getElementById('DefaultWorkSpace').outerHTML;
        var xml = Blockly.Xml.textToDom(xml_text);
        Blockly.Xml.domToWorkspace(Blockly.mainWorkspace, xml);  
        }
        else{
        var xml_text = document.getElementById('DefaultWorkSpace1').outerHTML;
        var xml = Blockly.Xml.textToDom(xml_text);
        Blockly.Xml.domToWorkspace(Blockly.mainWorkspace, xml);  
        }
    }
  </script>
</head>
<body onload="init()">
  <xml id="toolbox" style="display: none">
    <category name="Program Flow">
      <block type="controls_whileUntil"></block>
      <block type="controls_if"></block>
      <block type="logic_compare"></block>
    </category>
    <category name="Instructions">
      <block type="roblockwar_getRegister"></block>
      <block type="roblockwar_setRegister"></block>
      <block type="roblockwar_radar"></block>
      <block type="roblockwar_fire"></block>
      <block type="math_number"></block>
      <block type="math_arithmetic"></block>
    </category>
    <category name="Instruction Groups" custom="PROCEDURE">
    </category>
  </xml>
  
  <xml xmlns="http://www.w3.org/1999/xhtml" id="DefaultWorkSpace" style="display:none;">
    <block type="roblockwar_setRegister" id="1" inline="true" x="42" y="-5"><field name="RegisterName">A</field><value name="RegisterValue"><block type="math_number" id="2"><field name="NUM">0</field></block></value><next><block type="controls_whileUntil" id="3" inline="false"><field name="MODE">WHILE</field><value name="BOOL"><block type="logic_compare" id="4" inline="true"><field name="OP">LT</field><value name="A"><block type="roblockwar_getRegister" id="5"><field name="RegisterName">A</field></block></value><value name="B"><block type="math_number" id="6"><field name="NUM">10000</field></block></value></block></value><statement name="DO"><block type="roblockwar_setRegister" id="7" inline="true"><field name="RegisterName">A</field><value name="RegisterValue"><block type="math_arithmetic" id="8" inline="true"><field name="OP">ADD</field><value name="A"><block type="roblockwar_getRegister" id="9"><field name="RegisterName">A</field></block></value><value name="B"><block type="math_number" id="10"><field name="NUM">1</field></block></value></block></value><next><block type="roblockwar_setRegister" id="11" inline="true"><field name="RegisterName">SPEEDX</field><value name="RegisterValue"><block type="math_number" id="12"><field name="NUM">10</field></block></value><next><block type="roblockwar_setRegister" id="13" inline="true"><field name="RegisterName">SPEEDY</field><value name="RegisterValue"><block type="roblockwar_getRegister" id="14"><field name="RegisterName">A</field></block></value></block></next></block></next></block></statement><next><block type="roblockwar_setRegister" id="15" inline="true"><field name="RegisterName">SPEEDX</field><value name="RegisterValue"><block type="math_number" id="16"><field name="NUM">0</field></block></value><next><block type="roblockwar_setRegister" id="17" inline="true"><field name="RegisterName">SPEEDY</field><value name="RegisterValue"><block type="math_number" id="18"><field name="NUM">0</field></block></value></block></next></block></next></block></next></block>
  </xml>
  <xml xmlns="http://www.w3.org/1999/xhtml" id="DefaultWorkSpace1" style="display:none;">
    <block type="procedures_defnoreturn" id="1" x="1" y="1"><mutation></mutation><field name="NAME">move_to_corner</field><statement name="STACK"><block type="roblockwar_setRegister" id="2" inline="true"><field name="RegisterName">RANDOM</field><value name="RegisterValue"><block type="math_number" id="3"><field name="NUM">4</field></block></value><next><block type="roblockwar_setRegister" id="4" inline="true"><field name="RegisterName">S</field><value name="RegisterValue"><block type="roblockwar_getRegister" id="5"><field name="RegisterName">RANDOM</field></block></value><next><block type="controls_whileUntil" id="6" inline="false"><field name="MODE">WHILE</field><value name="BOOL"><block type="logic_compare" id="7" inline="true"><field name="OP">NEQ</field><value name="A"><block type="roblockwar_getRegister" id="8"><field name="RegisterName">S</field></block></value><value name="B"><block type="roblockwar_getRegister" id="9"><field name="RegisterName">R</field></block></value></block></value><statement name="DO"><block type="roblockwar_setRegister" id="10" inline="true"><field name="RegisterName">S</field><value name="RegisterValue"><block type="roblockwar_getRegister" id="11"><field name="RegisterName">RANDOM</field></block></value></block></statement><next><block type="roblockwar_setRegister" id="12" inline="true"><field name="RegisterName">R</field><value name="RegisterValue"><block type="roblockwar_getRegister" id="13"><field name="RegisterName">S</field></block></value><next><block type="controls_if" id="14" inline="false"><value name="IF0"><block type="logic_compare" id="15" inline="true"><field name="OP">EQ</field><value name="A"><block type="roblockwar_getRegister" id="16"><field name="RegisterName">R</field></block></value><value name="B"><block type="math_number" id="17"><field name="NUM">0</field></block></value></block></value><statement name="DO0"><block type="roblockwar_setRegister" id="18" inline="true"><field name="RegisterName">A</field><value name="RegisterValue"><block type="math_number" id="19"><field name="NUM">5</field></block></value><next><block type="roblockwar_setRegister" id="20" inline="true"><field name="RegisterName">B</field><value name="RegisterValue"><block type="math_number" id="21"><field name="NUM">5</field></block></value><next><block type="roblockwar_setRegister" id="22" inline="true"><field name="RegisterName">C</field><value name="RegisterValue"><block type="math_number" id="23"><field name="NUM">-1</field></block></value><next><block type="roblockwar_setRegister" id="24" inline="true"><field name="RegisterName">D</field><value name="RegisterValue"><block type="math_number" id="25"><field name="NUM">-1</field></block></value></block></next></block></next></block></next></block></statement><next><block type="controls_if" id="26" inline="false"><value name="IF0"><block type="logic_compare" id="27" inline="true"><field name="OP">EQ</field><value name="A"><block type="roblockwar_getRegister" id="28"><field name="RegisterName">R</field></block></value><value name="B"><block type="math_number" id="29"><field name="NUM">1</field></block></value></block></value><statement name="DO0"><block type="roblockwar_setRegister" id="30" inline="true"><field name="RegisterName">A</field><value name="RegisterValue"><block type="math_number" id="31"><field name="NUM">250</field></block></value><next><block type="roblockwar_setRegister" id="32" inline="true"><field name="RegisterName">B</field><value name="RegisterValue"><block type="math_number" id="33"><field name="NUM">5</field></block></value><next><block type="roblockwar_setRegister" id="34" inline="true"><field name="RegisterName">C</field><value name="RegisterValue"><block type="math_number" id="35"><field name="NUM">1</field></block></value><next><block type="roblockwar_setRegister" id="36" inline="true"><field name="RegisterName">D</field><value name="RegisterValue"><block type="math_number" id="37"><field name="NUM">-1</field></block></value></block></next></block></next></block></next></block></statement><next><block type="controls_if" id="38" inline="false"><value name="IF0"><block type="logic_compare" id="39" inline="true"><field name="OP">EQ</field><value name="A"><block type="roblockwar_getRegister" id="40"><field name="RegisterName">R</field></block></value><value name="B"><block type="math_number" id="41"><field name="NUM">2</field></block></value></block></value><statement name="DO0"><block type="roblockwar_setRegister" id="42" inline="true"><field name="RegisterName">A</field><value name="RegisterValue"><block type="math_number" id="43"><field name="NUM">250</field></block></value><next><block type="roblockwar_setRegister" id="44" inline="true"><field name="RegisterName">B</field><value name="RegisterValue"><block type="math_number" id="45"><field name="NUM">25</field></block></value><next><block type="roblockwar_setRegister" id="46" inline="true"><field name="RegisterName">C</field><value name="RegisterValue"><block type="math_number" id="47"><field name="NUM">1</field></block></value><next><block type="roblockwar_setRegister" id="48" inline="true"><field name="RegisterName">D</field><value name="RegisterValue"><block type="math_number" id="49"><field name="NUM">1</field></block></value></block></next></block></next></block></next></block></statement><next><block type="controls_if" id="50" inline="false"><value name="IF0"><block type="logic_compare" id="51" inline="true"><field name="OP">EQ</field><value name="A"><block type="roblockwar_getRegister" id="52"><field name="RegisterName">R</field></block></value><value name="B"><block type="math_number" id="53"><field name="NUM">3</field></block></value></block></value><statement name="DO0"><block type="roblockwar_setRegister" id="54" inline="true"><field name="RegisterName">A</field><value name="RegisterValue"><block type="math_number" id="55"><field name="NUM">5</field></block></value><next><block type="roblockwar_setRegister" id="56" inline="true"><field name="RegisterName">B</field><value name="RegisterValue"><block type="math_number" id="57"><field name="NUM">250</field></block></value><next><block type="roblockwar_setRegister" id="58" inline="true"><field name="RegisterName">C</field><value name="RegisterValue"><block type="math_number" id="59"><field name="NUM">-1</field></block></value><next><block type="roblockwar_setRegister" id="60" inline="true"><field name="RegisterName">D</field><value name="RegisterValue"><block type="math_number" id="61"><field name="NUM">1</field></block></value></block></next></block></next></block></next></block></statement><next><block type="controls_if" id="62" inline="false"><value name="IF0"><block type="logic_compare" id="63" inline="true"><field name="OP">LT</field><value name="A"><block type="math_arithmetic" id="64" inline="true"><field name="OP">MULTIPLY</field><value name="A"><block type="roblockwar_getRegister" id="65"><field name="RegisterName">X</field></block></value><value name="B"><block type="roblockwar_getRegister" id="66"><field name="RegisterName">C</field></block></value></block></value><value name="B"><block type="math_arithmetic" id="67" inline="true"><field name="OP">MULTIPLY</field><value name="A"><block type="roblockwar_getRegister" id="68"><field name="RegisterName">A</field></block></value><value name="B"><block type="roblockwar_getRegister" id="69"><field name="RegisterName">C</field></block></value></block></value></block></value><statement name="DO0"><block type="roblockwar_setRegister" id="70" inline="true"><field name="RegisterName">SPEEDX</field><value name="RegisterValue"><block type="math_arithmetic" id="71" inline="true"><field name="OP">MULTIPLY</field><value name="A"><block type="math_number" id="72"><field name="NUM">40</field></block></value><value name="B"><block type="roblockwar_getRegister" id="73"><field name="RegisterName">C</field></block></value></block></value></block></statement><next><block type="controls_if" id="74" inline="false"><value name="IF0"><block type="logic_compare" id="75" inline="true"><field name="OP">LT</field><value name="A"><block type="math_arithmetic" id="76" inline="true"><field name="OP">MULTIPLY</field><value name="A"><block type="roblockwar_getRegister" id="77"><field name="RegisterName">Y</field></block></value><value name="B"><block type="roblockwar_getRegister" id="78"><field name="RegisterName">D</field></block></value></block></value><value name="B"><block type="math_arithmetic" id="79" inline="true"><field name="OP">MULTIPLY</field><value name="A"><block type="roblockwar_getRegister" id="80"><field name="RegisterName">B</field></block></value><value name="B"><block type="roblockwar_getRegister" id="81"><field name="RegisterName">D</field></block></value></block></value></block></value><statement name="DO0"><block type="roblockwar_setRegister" id="82" inline="true"><field name="RegisterName">SPEEDY</field><value name="RegisterValue"><block type="math_arithmetic" id="83" inline="true"><field name="OP">MULTIPLY</field><value name="A"><block type="math_number" id="84"><field name="NUM">40</field></block></value><value name="B"><block type="roblockwar_getRegister" id="85"><field name="RegisterName">D</field></block></value></block></value></block></statement><next><block type="controls_whileUntil" id="86" inline="false"><field name="MODE">WHILE</field><value name="BOOL"><block type="logic_compare" id="87" inline="true"><field name="OP">GT</field><value name="A"><block type="math_arithmetic" id="88" inline="true"><field name="OP">ADD</field><value name="A"><block type="roblockwar_getRegister" id="89"><field name="RegisterName">SPEEDY</field></block></value><value name="B"><block type="roblockwar_getRegister" id="90"><field name="RegisterName">SPEEDX</field></block></value></block></value><value name="B"><block type="math_number" id="91"><field name="NUM">0</field></block></value></block></value><statement name="DO"><block type="controls_if" id="92" inline="false"><value name="IF0"><block type="logic_compare" id="93" inline="true"><field name="OP">GTE</field><value name="A"><block type="math_arithmetic" id="94" inline="true"><field name="OP">MULTIPLY</field><value name="A"><block type="roblockwar_getRegister" id="95"><field name="RegisterName">X</field></block></value><value name="B"><block type="roblockwar_getRegister" id="96"><field name="RegisterName">C</field></block></value></block></value><value name="B"><block type="math_arithmetic" id="97" inline="true"><field name="OP">MULTIPLY</field><value name="A"><block type="roblockwar_getRegister" id="98"><field name="RegisterName">A</field></block></value><value name="B"><block type="roblockwar_getRegister" id="99"><field name="RegisterName">C</field></block></value></block></value></block></value><statement name="DO0"><block type="roblockwar_setRegister" id="100" inline="true"><field name="RegisterName">SPEEDX</field><value name="RegisterValue"><block type="math_number" id="101"><field name="NUM">0</field></block></value></block></statement><next><block type="controls_if" id="102" inline="false"><value name="IF0"><block type="logic_compare" id="103" inline="true"><field name="OP">GTE</field><value name="A"><block type="math_arithmetic" id="104" inline="true"><field name="OP">MULTIPLY</field><value name="A"><block type="roblockwar_getRegister" id="105"><field name="RegisterName">Y</field></block></value><value name="B"><block type="roblockwar_getRegister" id="106"><field name="RegisterName">D</field></block></value></block></value><value name="B"><block type="math_arithmetic" id="107" inline="true"><field name="OP">MULTIPLY</field><value name="A"><block type="roblockwar_getRegister" id="108"><field name="RegisterName">B</field></block></value><value name="B"><block type="roblockwar_getRegister" id="109"><field name="RegisterName">D</field></block></value></block></value></block></value><statement name="DO0"><block type="roblockwar_setRegister" id="110" inline="true"><field name="RegisterName">SPEEDY</field><value name="RegisterValue"><block type="math_number" id="111"><field name="NUM">0</field></block></value></block></statement></block></next></block></statement></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="procedures_defnoreturn" id="115" x="359" y="-2"><mutation></mutation><field name="NAME">scan_and_fire</field><statement name="STACK"><block type="roblockwar_setRegister" id="122" inline="true"><field name="RegisterName">RANDOM</field><value name="RegisterValue"><block type="math_number" id="133"><field name="NUM">360</field></block></value><next><block type="roblockwar_setRegister" id="140" inline="true"><field name="RegisterName">AIM</field><value name="RegisterValue"><block type="roblockwar_getRegister" id="147"><field name="RegisterName">RANDOM</field></block></value><next><block type="controls_if" id="155" inline="false"><value name="IF0"><block type="logic_compare" id="176" inline="true"><field name="OP">LT</field><value name="A"><block type="roblockwar_radar" id="162"></block></value><value name="B"><block type="math_number" id="183"><field name="NUM">0</field></block></value></block></value><statement name="DO0"><block type="controls_whileUntil" id="238" inline="false"><field name="MODE">WHILE</field><value name="BOOL"><block type="logic_compare" id="203" inline="true"><field name="OP">GT</field><value name="A"><block type="roblockwar_getRegister" id="213"><field name="RegisterName">COOLDOWN</field></block></value><value name="B"><block type="math_number" id="220"><field name="NUM">0</field></block></value></block></value><statement name="DO"><block type="roblockwar_setRegister" id="245" inline="true"><field name="RegisterName">U</field><value name="RegisterValue"><block type="math_number" id="252"><field name="NUM">0</field></block></value></block></statement><next><block type="roblockwar_fire" id="227" inline="true"><value name="BlastDelay"><block type="roblockwar_getRegister" id="234"><field name="RegisterName">DISTANCE</field></block></value></block></next></block></statement></block></next></block></next></block></statement></block><block type="procedures_callnoreturn" id="253" x="360" y="331"><mutation name="move_to_corner"></mutation><next><block type="roblockwar_setRegister" id="260" inline="true"><field name="RegisterName">Q</field><value name="RegisterValue"><block type="roblockwar_getRegister" id="267"><field name="RegisterName">DAMAGE</field></block></value><next><block type="controls_whileUntil" id="277" inline="false"><field name="MODE">WHILE</field><value name="BOOL"><block type="logic_compare" id="290" inline="true"><field name="OP">LT</field><value name="A"><block type="roblockwar_getRegister" id="306"><field name="RegisterName">DAMAGE</field></block></value><value name="B"><block type="math_number" id="313"><field name="NUM">100</field></block></value></block></value><statement name="DO"><block type="controls_whileUntil" id="321" inline="false"><field name="MODE">WHILE</field><value name="BOOL"><block type="logic_compare" id="322" inline="true"><field name="OP">LT</field><value name="A"><block type="roblockwar_getRegister" id="323"><field name="RegisterName">DAMAGE</field></block></value><value name="B"><block type="math_arithmetic" id="331" inline="true"><field name="OP">ADD</field><value name="A"><block type="roblockwar_getRegister" id="338"><field name="RegisterName">Q</field></block></value><value name="B"><block type="math_number" id="324"><field name="NUM">20</field></block></value></block></value></block></value><statement name="DO"><block type="procedures_callnoreturn" id="339"><mutation name="scan_and_fire"></mutation></block></statement><next><block type="procedures_callnoreturn" id="340"><mutation name="move_to_corner"></mutation><next><block type="roblockwar_setRegister" id="341" inline="true"><field name="RegisterName">Q</field><value name="RegisterValue"><block type="roblockwar_getRegister" id="342"><field name="RegisterName">DAMAGE</field></block></value></block></next></block></next></block></statement></block></next></block></next></block>
  </xml>
</body>
</html>